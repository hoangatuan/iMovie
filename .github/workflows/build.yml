# How to setup danger with github actions: https://www.jessesquires.com/blog/2020/04/10/running-danger-on-github-actions/

name: Build project
run-name: ${{ github.actor }} running
on: [pull_request]
jobs:
  Explore-Github-Actions:
    runs-on: macos-13
    steps:
      - name: Check out repository code
        uses: actions/checkout@v4
      
      - name: Xcode
        uses: maxim-lobanov/setup-xcode@v1
        with:
          xcode-version: 14.3.1

      - name: Get all available simulators
        run: xcrun simctl list devices --json | jq -r '.devices[] | .[] | .name'
      
      - name: Run Unit tests
        run: xcodebuild test -project iMovie.xcodeproj -scheme iMovie -destination 'platform=iOS Simulator,name=iPhone 14,OS=16' -enableCodeCoverage YES build test

      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v1.2.1

      - run: echo "üçè This job's status is ${{ job.status }}."